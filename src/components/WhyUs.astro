---
// Why Us section component - Founder-led studio advantages

const values = [
  {
    number: "01",
    title: "Direct Partnership",
    description:
      "Work directly with the founder and decision-maker. No account managers, no telephone game—clear communication from start to finish.",
    icon: "handshake",
  },
  {
    number: "02",
    title: "Personal Investment",
    description:
      "Every project carries my reputation. You get the same dedication and attention to detail whether it's a small feature or a full product.",
    icon: "heart",
  },
  {
    number: "03",
    title: "End-to-End Ownership",
    description:
      "One expert sees your project from concept to completion. No handoffs between teams, no context lost in translation.",
    icon: "compass",
  },
  {
    number: "04",
    title: "Agility Without Bureaucracy",
    description:
      "Quick decisions, flexible scope, and real responsiveness. No committees to consult or processes to navigate.",
    icon: "lightning",
  },
];
---

<section id="why-us" class="relative py-32 md:py-48">
  <!-- Subtle background pattern -->
  <div
    class="pointer-events-none absolute inset-0 overflow-hidden opacity-[0.015]"
  >
    <div
      class="absolute inset-0"
      style="background-image: radial-gradient(circle at 1px 1px, currentColor 1px, transparent 0); background-size: 48px 48px;"
    >
    </div>
  </div>

  <!-- Hat landing spot - decorative element (RIGHT on mobile, RIGHT on desktop) -->
  <div
    data-hat-landing="why-us"
    class="absolute top-32 right-8 flex size-16 items-center justify-center sm:right-12 md:top-40 md:right-20"
  >
    <div class="border-strawhat-red h-3 w-6 rounded-full border-2 opacity-60">
    </div>
  </div>

  <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
    <div class="space-y-20">
      <!-- Section Header -->
      <div class="relative space-y-6">
        <div class="flex items-center gap-4">
          <div class="bg-strawhat-yellow h-px w-12"></div>
          <span
            class="text-strawhat-yellow text-sm font-medium tracking-widest uppercase"
            >Why Us</span
          >
        </div>
        <h2
          class="text-strawhat-text text-4xl/tight font-light tracking-tight md:text-6xl"
        >
          The founder-led advantage
        </h2>
        <p
          class="text-strawhat-text-light max-w-2xl text-lg/relaxed font-light"
        >
          When you work with a boutique studio, you get something larger
          agencies can't offer—direct access, personal accountability, and the
          agility to move fast.
        </p>
      </div>

      <!-- Values Grid -->
      <div class="why-us-grid grid gap-6 md:grid-cols-2">
        {
          values.map((value) => (
            <article
              class="why-us-card group relative"
              style="perspective: 1000px;"
            >
              {/* Card container */}
              <div
                class="why-us-card-inner relative flex h-full flex-col rounded-2xl border border-zinc-200/60 bg-white/70 p-8 backdrop-blur-sm transition-all duration-300 hover:border-zinc-300/80 hover:bg-white/90 hover:shadow-xl hover:shadow-zinc-200/50 hover:backdrop-blur-xl hover:backdrop-saturate-150 dark:border-zinc-800/60 dark:bg-zinc-900/70 dark:hover:border-zinc-700/80 dark:hover:bg-zinc-900/90 dark:hover:shadow-zinc-900/50"
                style="transform-style: preserve-3d; will-change: transform;"
              >
                {/* Spotlight dim overlay - confined to card */}
                <div class="why-us-dim-overlay" />
                {/* Number & Icon row */}
                <div class="mb-6 flex items-start justify-between">
                  <span class="text-strawhat-yellow/40 group-hover:text-strawhat-yellow/70 text-5xl font-extralight tracking-tighter transition-colors duration-300">
                    {value.number}
                  </span>

                  {/* Minimal geometric icon */}
                  <div class="text-strawhat-text-light/40 group-hover:text-strawhat-yellow transition-colors duration-300">
                    {value.icon === "handshake" && (
                      <svg
                        class="size-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                      >
                        <path d="M7 11l4-4 4 4M3 15l4-4M17 15l4-4" />
                        <path d="M12 7v10M7 17l5-5 5 5" />
                      </svg>
                    )}
                    {value.icon === "heart" && (
                      <svg
                        class="size-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                      >
                        <path d="M12 21C12 21 4 13.5 4 8.5C4 5.46 6.46 3 9.5 3C11.05 3 12.42 3.78 13.28 4.97L12 6.75L10.72 4.97C11.58 3.78 12.95 3 14.5 3C17.54 3 20 5.46 20 8.5C20 13.5 12 21 12 21Z" />
                      </svg>
                    )}
                    {value.icon === "compass" && (
                      <svg
                        class="size-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                      >
                        <circle cx="12" cy="12" r="10" />
                        <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76" />
                      </svg>
                    )}
                    {value.icon === "lightning" && (
                      <svg
                        class="size-6"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                        stroke-width="1.5"
                      >
                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                      </svg>
                    )}
                  </div>
                </div>

                {/* Content */}
                <div class="flex flex-1 flex-col space-y-4">
                  <h3 class="text-strawhat-text text-xl font-medium tracking-tight">
                    {value.title}
                  </h3>
                  <p class="text-strawhat-text-light flex-1 text-sm/relaxed font-light">
                    {value.description}
                  </p>

                  {/* Subtle bottom accent */}
                  <div class="pt-4">
                    <div class="bg-strawhat-yellow/20 group-hover:bg-strawhat-yellow/40 h-px w-12 transition-all duration-300 group-hover:w-20" />
                  </div>
                </div>
              </div>
            </article>
          ))
        }
      </div>
    </div>
  </div>
</section>

<style>
  .why-us-card {
    --card-delay: 0ms;
    --spot-x: 50%;
    --spot-y: 50%;
  }

  .why-us-card:nth-child(1) {
    --card-delay: 0ms;
  }
  .why-us-card:nth-child(2) {
    --card-delay: 50ms;
  }
  .why-us-card:nth-child(3) {
    --card-delay: 100ms;
  }
  .why-us-card:nth-child(4) {
    --card-delay: 150ms;
  }

  /* Mobile: add active state for touch */
  @media (max-width: 767px) {
    .why-us-card:active .why-us-card-inner {
      transform: scale(0.98);
    }
  }

  .why-us-card-inner {
    transform: rotateX(0deg) rotateY(0deg);
    transition:
      transform 0.15s ease-out,
      border-color 0.3s ease,
      box-shadow 0.3s ease;
  }

  /* Themed highlight glow that follows cursor - desktop only */
  .why-us-dim-overlay {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 100;
    border-radius: inherit;
    opacity: 0;
    transition: opacity 0.3s ease;
    background: radial-gradient(
      circle 150px at var(--spot-x) var(--spot-y),
      var(--strawhat-yellow) 0%,
      transparent 70%
    );
  }

  @media (min-width: 768px) {
    .why-us-card:hover .why-us-dim-overlay {
      opacity: 0.08;
    }
  }

  @media (prefers-reduced-motion: no-preference) {
    .why-us-card {
      animation: fadeInUp 0.6s ease-out both;
      animation-delay: var(--card-delay);
    }
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<script>
  // Desktop only - interactive effects
  if (window.innerWidth >= 768) {
    // Update highlight position on each why-us card
    const whyUsCards = document.querySelectorAll(".why-us-card");

    whyUsCards.forEach((card) => {
      card.addEventListener("mousemove", (e) => {
        const event = e as MouseEvent;
        const rect = card.getBoundingClientRect();
        const x = event.clientX - rect.left;
        const y = event.clientY - rect.top;
        (card as HTMLElement).style.setProperty("--spot-x", `${x}px`);
        (card as HTMLElement).style.setProperty("--spot-y", `${y}px`);
      });
    });

    // 3D tilt effect for why-us cards
    document.querySelectorAll(".why-us-card").forEach((card) => {
      const inner = card.querySelector(".why-us-card-inner") as HTMLElement;
      if (!inner) return;

      const maxTilt = 15; // Maximum tilt in degrees

      card.addEventListener("mousemove", (e) => {
        const event = e as MouseEvent;
        const rect = card.getBoundingClientRect();

        // Calculate mouse position relative to card center (0 to 1, then -0.5 to 0.5)
        const x = (event.clientX - rect.left) / rect.width - 0.5;
        const y = (event.clientY - rect.top) / rect.height - 0.5;

        // Calculate rotation (inverted so card tilts toward cursor)
        const rotateY = x * maxTilt; // Left/right tilt
        const rotateX = -y * maxTilt; // Up/down tilt (inverted)

        inner.style.transform = `rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
      });

      card.addEventListener("mouseleave", () => {
        // Reset to flat
        inner.style.transform = "rotateX(0deg) rotateY(0deg)";
      });
    });
  }
</script>
