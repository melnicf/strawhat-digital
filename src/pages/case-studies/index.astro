---
import { getCollection, type CollectionEntry } from "astro:content";
import Layout from "../../layouts/Layout.astro";
import Navbar from "../../components/Navbar.astro";
import CaseStudyCard from "../../components/CaseStudyCard.astro";

type CaseStudy = CollectionEntry<"case-studies">;

// Get all case studies, sorted by order
const caseStudies = (await getCollection("case-studies")).sort(
  (a: CaseStudy, b: CaseStudy) => a.data.order - b.data.order
);
---

<Layout>
  <Navbar />

  <!-- Hero Section -->
  <section class="relative pt-32 pb-16 md:pt-48 md:pb-24">
    <div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
      <div class="space-y-8">
        <!-- Back link -->
        <a
          href="/"
          class="group text-strawhat-text-light hover:text-strawhat-yellow inline-flex items-center gap-2 text-sm transition-colors"
        >
          <svg
            class="size-4 transition-transform duration-300 group-hover:-translate-x-1"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="M19 12H5M12 19l-7-7 7-7"></path>
          </svg>
          Back to home
        </a>

        <!-- Header -->
        <div class="flex items-center gap-4">
          <div class="bg-strawhat-yellow h-px w-12"></div>
          <span
            class="text-strawhat-yellow text-sm font-medium tracking-widest uppercase"
          >
            Our Work
          </span>
        </div>

        <h1
          class="text-strawhat-text text-4xl/tight font-light tracking-tight md:text-6xl"
        >
          Case Studies
        </h1>

        <p
          class="text-strawhat-text-light max-w-2xl text-xl/relaxed font-light"
        >
          Explore our portfolio of work. Each project represents a unique
          challenge we've helped solve.
        </p>
      </div>
    </div>
  </section>

  <!-- Case Studies Grid -->
  <section class="py-16 md:py-24">
    <div class="mx-auto max-w-6xl px-4 sm:px-6 lg:px-8">
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {
          caseStudies.map((study: CaseStudy) => (
            <CaseStudyCard
              slug={study.id}
              title={study.data.title}
              client={study.data.client}
              description={study.data.description}
              image={study.data.image}
              tags={study.data.tags}
            />
          ))
        }
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="border-strawhat-text/10 border-t py-16 md:py-24">
    <div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col items-center justify-center gap-6 text-center">
        <h2
          class="text-strawhat-text text-2xl font-light tracking-tight md:text-3xl"
        >
          Ready to start your project?
        </h2>
        <p class="text-strawhat-text-light max-w-md text-base font-light">
          Let's discuss how we can help bring your vision to life.
        </p>
        <a
          href="/#get-started"
          class="border-strawhat-yellow text-strawhat-yellow hover:border-strawhat-amber hover:text-strawhat-amber border-b-2 pb-2 text-lg font-light tracking-wider transition-all"
        >
          Get in touch
        </a>
      </div>
    </div>
  </section>
</Layout>
